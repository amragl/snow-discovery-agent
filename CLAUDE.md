# SNOW Discovery Agent - ServiceNow Discovery Operations

## Overview
Discovery scheduling, result analysis, failure remediation, IP range/credential/pattern management for ServiceNow Discovery via REST API.

## Core Principles (NON-NEGOTIABLE)
1. **ZERO MOCKS** — Every API call, data point, and integration must be real. No mock data, no hardcoded values, no stub implementations. If the ServiceNow instance isn’t available, STOP and report the blocker.
2. **FAIL-STOP** — If any agent or tool encounters an error, the pipeline halts. No silent failures. No workarounds. Fix the issue, then resume.
3. **CREDENTIAL SAFETY** — Never log, expose, or return credential secrets. Handle credential references by sys_id only.

## Architecture
```
FastMCP Server (server.py)
  |
  +-- schedule_discovery        (create/manage discovery schedules)
  +-- analyze_discovery         (analyze discovery results + failures)
  +-- remediate_discovery       (fix failed discoveries)
  +-- compare_discoveries       (compare discovery runs)
  +-- manage_ranges             (IP range management)
  +-- manage_credentials        (credential lifecycle)
  +-- check_health              (discovery infrastructure health)
  +-- manage_patterns           (CMDB CI patterns)
  +-- get_status                (discovery run status)
  +-- list_schedules            (list all schedules)
  |
  +-- ServiceNowClient (client.py) -> ServiceNow REST API
```

## MCP Tools (10 tools)
| Tool | Purpose |
|------|---------|
| `schedule_discovery` | Create and manage discovery schedules |
| `analyze_discovery` | Analyze discovery results and failures |
| `remediate_discovery` | Fix failed discovery issues |
| `compare_discoveries` | Compare two discovery runs |
| `manage_ranges` | IP range CRUD operations |
| `manage_credentials` | Credential lifecycle management |
| `check_health` | Discovery infrastructure health check |
| `manage_patterns` | CMDB CI pattern management |
| `get_status` | Get discovery run status |
| `list_schedules` | List all discovery schedules |

## ServiceNow Tables
| Table | Purpose |
|-------|---------|
| `discovery_status` | Discovery run status |
| `discovery_log` | Discovery logs |
| `discovery_schedule` | Discovery schedules |
| `discovery_credential` | Discovery credentials |
| `discovery_range` | IP ranges |
| `cmdb_ci_pattern` | CI patterns |
| `sys_properties` | System properties |

## Configuration
- **Env prefix:** `SNOW_*`
- **Key variables:** `SNOW_INSTANCE`, `SNOW_USERNAME`, `SNOW_PASSWORD`

## Key Files
- `src/snow_discovery_agent/server.py` — MCP server entry point
- `src/snow_discovery_agent/tools/` — Tool modules
- `src/snow_discovery_agent/client.py` — ServiceNow REST API client

## Git Workflow
- All agent work happens on feature branches
- PRs for human review before merging
- Never push directly to main

---

<!-- BEGIN AGENT FORGE MANAGED SECTION -->
<!-- Generated by Agent Forge on 2026-02-12T21:45:00Z -->
<!-- Template version: 1.0.0 -->

# Agent Forge - Project Integration

This project is managed by [Agent Forge](https://github.com/amragl/agent-forge), a multi-agent SDLC orchestration system.

## Core Principles (NON-NEGOTIABLE)

1. **ZERO MOCKS** -- Every function, data point, and integration must be real. No mock data, no hardcoded values, no stub implementations. If real data or APIs are not available, the agent must STOP and report the blocker.
2. **FAIL-STOP** -- If any agent, tool, hook, or skill encounters an error, the entire pipeline halts. No silent failures. No workarounds. Fix the issue, then resume.
3. **GitHub-Native** -- All work happens through proper git workflow: branches, commits, PRs, issues. No direct pushes to main.

## Git Workflow

- **Main branch:** `main`
- **Development branch:** `main`
- **Feature branches:** `feature/<ticket-id>-<description>`
- **Fix branches:** `fix/<ticket-id>-<description>`
- **Agent branches:** `agent/<agent-name>/<ticket-id>`
- Never push directly to `main`
- All changes go through pull requests targeting `main`

## Agent Forge Integration

- **Hub location:** `/Users/amragl/Python Projects/agent-forge`
- **Project config:** `.agent-forge/project.json`
- **Pipeline state:** `.agent-forge/state/pipeline.json`
- **Backlog:** `.agent-forge/plans/backlog.json`
- **Test cases:** `.agent-forge/tests/test-cases.json`
- **Reports:** `.agent-forge/reports/`

### Available Commands

- `/forge-plan` -- Invoke Plan Agent (roadmap, backlog, ticket selection)
- `/forge-build` -- Invoke Build Agent (implement tickets via branches and PRs)
- `/forge-validate` -- Invoke Validate Agent (code quality, mock detection)
- `/forge-test` -- Invoke Test Agent (test generation, execution, regression tracking)
- `/forge-monitor` -- Invoke Monitor Agent (health checks, pattern analysis)
- `/forge-improve` -- Invoke Improve Agent (improvement proposals)
- `/forge-status` -- Show current state of all agents and tickets
- `/forge-run` -- Run full pipeline (Plan -> Build -> Validate -> Test -> Monitor)
- `/forge-dashboard` -- Unified dashboard with pipeline, health, progress

## Labels Convention

GitHub issues use these labels:
- `agent:plan`, `agent:build`, `agent:validate`, `agent:test`, `agent:monitor`, `agent:improve`
- `priority:critical`, `priority:high`, `priority:medium`, `priority:low`
- `type:feature`, `type:bug`, `type:improvement`, `type:tech-debt`
- `status:blocked`, `status:in-progress`, `status:review`, `status:done`

## Tech Stack

- **Languages:** Python 3.11+
- **Frameworks:** FastMCP, Pydantic
- **Other:** ServiceNow REST API, MCP Protocol

<!-- END AGENT FORGE MANAGED SECTION -->
